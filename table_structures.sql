mysql> SHOW CREATE TABLE `account_types`;
+---------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Table         | Create Table

                |
+---------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| account_types | CREATE TABLE `account_types` (
  `account_type` varchar(50) NOT NULL,
  PRIMARY KEY (`account_type`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci |
+---------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
1 row in set (0.01 sec)

mysql> select * from account_types;
+--------------+
| account_type |
+--------------+
| Bank         |
| Cash         |
| custom       |
| Main Fund    |
| payee        |
| payer        |
| Printer      |
| Salary       |
| Unit         |
+--------------+
9 rows in set (0.03 sec)

mysql> SHOW CREATE TABLE `accounts`;
+----------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Table    | Create Table



                        |
+----------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| accounts | CREATE TABLE `accounts` (
  `account_name` varchar(100) NOT NULL,
  `account_type` varchar(50) DEFAULT NULL,
  PRIMARY KEY (`account_name`),
  KEY `account_type` (`account_type`),
  CONSTRAINT `accounts_ibfk_1` FOREIGN KEY (`account_type`) REFERENCES `account_types` (`account_type`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci |
+----------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
1 row in set (0.00 sec)

mysql> select * from accounts; 
+---------------+--------------+
| account_name  | account_type |
+---------------+--------------+
| PNB           | bank         |
| Cash          | cash         |
| Property      | custom       |
| main fund     | main fund    |
| AAA           | salary       |
+---------------+--------------+
5 rows in set (0.01 sec)

mysql> SHOW CREATE TABLE `fd_details`;
+------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Table      | Create Table








                                                                   |
+------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| fd_details | CREATE TABLE `fd_details` (
  `fd_id` int NOT NULL AUTO_INCREMENT,
  `payment_id` varchar(20) DEFAULT NULL,
  `bank_account` varchar(100) DEFAULT NULL,
  `amount` decimal(15,2) NOT NULL,
  `duration` varchar(50) NOT NULL,
  `interest_rate` varchar(20) NOT NULL,
  `narration` text,
  `fd_date` date NOT NULL,
  `maturity_date` date DEFAULT NULL,
  `status` varchar(20) DEFAULT 'Active',
  `maturity_amount` decimal(15,2) DEFAULT NULL,
  PRIMARY KEY (`fd_id`),
  KEY `payment_id` (`payment_id`),
  KEY `bank_account` (`bank_account`),
  CONSTRAINT `fd_details_ibfk_1` FOREIGN KEY (`payment_id`) REFERENCES `payments` (`payment_id`),
  CONSTRAINT `fd_details_ibfk_2` FOREIGN KEY (`bank_account`) REFERENCES `accounts` (`account_name`)
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci |+------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
1 row in set (0.00 sec)

mysql> SHOW CREATE TABLE `journal_entries`;
+-----------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Table           | Create Table







                                                                 |
+-----------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| journal_entries | CREATE TABLE `journal_entries` (
  `id` int NOT NULL AUTO_INCREMENT,
  `entry_id` varchar(20) NOT NULL,
  `account_name` varchar(100) DEFAULT NULL,
  `entry_type` enum('Bank','Fund') NOT NULL,
  `amount` decimal(10,2) DEFAULT NULL,
  `narration` text,
  `mop` varchar(50) DEFAULT NULL,
  `entry_date` date NOT NULL,
  `fd` decimal(15,2) DEFAULT NULL,
  `sundry` decimal(15,2) DEFAULT NULL,
  `property` decimal(15,2) DEFAULT NULL,
  `fund` decimal(15,2) DEFAULT NULL,
  `cash` decimal(15,2) DEFAULT NULL,
  PRIMARY KEY (id),
  UNIQUE KEY entry_id (entry_id),
  KEY account_name_idx (account_name),
  CONSTRAINT journal_entries_ibfk_1 FOREIGN KEY (account_name) REFERENCES accounts (account_name)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

-- Table: monthly_main_fund_balance
mysql> SHOW CREATE TABLE `monthly_main_fund_balance`;
+---------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Table                     | Create Table


                    |
+---------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| monthly_main_fund_balance | CREATE TABLE `monthly_main_fund_balance` (
  `month` varchar(7) NOT NULL,
  `opening` decimal(12,2) DEFAULT NULL,
  `closing` decimal(12,2) DEFAULT NULL,
  PRIMARY KEY (`month`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci |
+---------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
1 row in set (0.00 sec)

mysql> SHOW CREATE TABLE `monthly_sundry_outstanding`;
+----------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Table                      | Create Table


                      |
+----------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| monthly_sundry_outstanding | CREATE TABLE `monthly_sundry_outstanding` (
  `month` varchar(6) NOT NULL,
  `brought_forward` int DEFAULT NULL,
  `current_outstanding` int DEFAULT NULL,
  PRIMARY KEY (`month`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci |
+----------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
1 row in set (0.00 sec)

mysql> SHOW CREATE TABLE `notifications`;
+---------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Table         | Create Table




       |
+---------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| notifications | CREATE TABLE `notifications` (
  `notification_id` int NOT NULL AUTO_INCREMENT,
  `entry_id` varchar(50) NOT NULL,
  `status` enum('approved','rejected') NOT NULL,
  `created_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`notification_id`),
  KEY `idx_entry_id` (`entry_id`),
  KEY `idx_created_at` (`created_at`)
) ENGINE=InnoDB AUTO_INCREMENT=14 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci 
|
+---------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
1 row in set (0.00 sec)

mysql> SHOW CREATE TABLE `payments`;
+----------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Table    | Create Table






             |
+----------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| payments | CREATE TABLE `payments` (
  `id` int NOT NULL AUTO_INCREMENT,
  `payment_id` varchar(20) NOT NULL,
  `account_name` varchar(100) NOT NULL,
  `amount` decimal(10,2) NOT NULL,
  `mop` varchar(50) NOT NULL,
  `narration` varchar(255) NOT NULL,
  `date` date NOT NULL,
  `remarks` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `payment_id` (`payment_id`),
  KEY `account_name_idx` (`account_name`),
  CONSTRAINT `payments_ibfk_1` FOREIGN KEY (`account_name`) REFERENCES `accounts` (`account_name`)
) ENGINE=InnoDB AUTO_INCREMENT=19 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci 
|
+----------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
1 row in set (0.00 sec)

mysql> SHOW CREATE TABLE `pending_transactions`;
+----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Table                | Create Table








                     |
+----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| pending_transactions | CREATE TABLE `pending_transactions` (
  `id` int NOT NULL AUTO_INCREMENT,
  `transaction_type` enum('payment','receipt') NOT NULL,
  `account_name` varchar(100) NOT NULL,
  `amount` decimal(10,2) NOT NULL,
  `mop` varchar(50) NOT NULL,
  `narration` varchar(255) NOT NULL,
  `transaction_date` date NOT NULL,
  `remarks` varchar(255) DEFAULT NULL,
  `author` varchar(100) DEFAULT NULL,
  `item_name` varchar(100) DEFAULT NULL,
  `description` varchar(100) DEFAULT NULL,
  `property_type` varchar(50) DEFAULT NULL,
  `fd_duration` varchar(50) DEFAULT NULL,
  `fd_interest` varchar(20) DEFAULT NULL,
  `created_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=29 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci 
|
+----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
1 row in set (0.00 sec)

mysql> SHOW CREATE TABLE `property_details`;
+------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Table            | Create Table






                       |
+------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| property_details | CREATE TABLE `property_details` (
  `id` int NOT NULL AUTO_INCREMENT,
  `payment_id` varchar(20) DEFAULT NULL,
  `item_name` varchar(100) NOT NULL,
  `description` varchar(20) DEFAULT NULL,
  `type` varchar(50) DEFAULT NULL,
  `purchase_date` date DEFAULT NULL,
  `value` decimal(10,2) DEFAULT NULL,
  `depreciation_rate` decimal(5,2) DEFAULT '0.00',
  `new_rate` decimal(10,2) DEFAULT '0.00',
  PRIMARY KEY (`id`),
  KEY `payment_id` (`payment_id`),
  CONSTRAINT `property_details_ibfk_1` FOREIGN KEY (`payment_id`) REFERENCES `payments` (`payment_id`)
) ENGINE=InnoDB AUTO_INCREMENT=14 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci |
+------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
1 row in set (0.00 sec)

mysql> SHOW CREATE TABLE `receipts`;
+----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Table    | Create Table






            |
+----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| receipts | CREATE TABLE `receipts` (
  `id` int NOT NULL AUTO_INCREMENT,
  `receipt_id` varchar(20) NOT NULL,
  `account_name` varchar(100) NOT NULL,
  `amount` decimal(10,2) NOT NULL,
  `mop` varchar(50) NOT NULL,
  `narration` varchar(255) NOT NULL,
  `date` date NOT NULL,
  `remarks` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `receipt_id` (`receipt_id`),
  KEY `account_name_idx` (`account_name`),
  CONSTRAINT `receipts_ibfk_1` FOREIGN KEY (`account_name`) REFERENCES `accounts` (`account_name`)
) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci |+----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
1 row in set (0.00 sec)

mysql> SHOW CREATE TABLE `sundry_credits`;
+----------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Table          | Create Table



     |
+----------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| sundry_credits | CREATE TABLE `sundry_credits` (
  `entry_id` int NOT NULL AUTO_INCREMENT,
  `account_name` varchar(255) DEFAULT NULL,
  `amount` decimal(12,2) DEFAULT NULL,
  `entry_date` date DEFAULT NULL,
  `narration` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`entry_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci |
+----------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
1 row in set (0.00 sec)

mysql> SHOW CREATE TABLE `users`;
+-------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Table | Create Table



                         |
+-------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| users | CREATE TABLE `users` (
  `user_id` int NOT NULL AUTO_INCREMENT,
  `username` varchar(50) NOT NULL,
  `password` varchar(255) NOT NULL,
  `role` enum('admin','accountant','viewer') NOT NULL DEFAULT 'viewer',
  PRIMARY KEY (`user_id`),
  UNIQUE KEY `username` (`username`)
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci |+-------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
1 row in set (0.00 sec)

mysql> select * from users;
+---------+------------+------------+------------+
| user_id | username   | password   | role       |
+---------+------------+------------+------------+
|       1 | admin      | admin123   | admin      |
|       2 | accountant | account123 | accountant |
|       3 | viewer     | viewer123  | viewer     |
+---------+------------+------------+------------+
3 rows in set (0.00 sec)


mysql> -- To see foreign keys for all tables:
mysql> SELECT
    ->     TABLE_NAME,
    ->     COLUMN_NAME,
    ->     CONSTRAINT_NAME,
    ->     REFERENCED_TABLE_NAME,
    ->     REFERENCED_COLUMN_NAME
    -> FROM
    ->     information_schema.KEY_COLUMN_USAGE
    -> WHERE
    ->     TABLE_SCHEMA = DATABASE()
    ->     AND REFERENCED_TABLE_NAME IS NOT NULL;
+------------------+--------------+-------------------------+-----------------------+------------------------+
| TABLE_NAME       | COLUMN_NAME  | CONSTRAINT_NAME         | REFERENCED_TABLE_NAME | REFERENCED_COLUMN_NAME |
+------------------+--------------+-------------------------+-----------------------+------------------------+
| accounts         | account_type | accounts_ibfk_1         | account_types         | account_type           |
| fd_details       | payment_id   | fd_details_ibfk_1       | payments              | payment_id             |
| fd_details       | bank_account | fd_details_ibfk_2       | accounts              | account_name           |
| journal_entries  | account_name | journal_entries_ibfk_1  | accounts              | account_name           |
| payments         | account_name | payments_ibfk_1         | accounts              | account_name           |
| property_details | payment_id   | property_details_ibfk_1 | payments              | payment_id             |
| receipts         | account_name | receipts_ibfk_1         | accounts              | account_name           |
+------------------+--------------+-------------------------+-----------------------+------------------------+
7 rows in set (0.00 sec)

TriggersSS


mysql> SHOW TRIGGERS;
+-----------------------+--------+----------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+------------------------+-----------------------------------------------------------------------------------------------------------------------+----------------+----------------------+----------------------+--------------------+
| Trigger               | Event  | Table    | Statement


                                                      | Timing | Created
   | sql_mode
                                      | Definer        | character_set_client | collation_connection | Database Collation |
+-----------------------+--------+----------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+------------------------+-----------------------------------------------------------------------------------------------------------------------+----------------+----------------------+----------------------+--------------------+
| before_payment_insert | INSERT | payments | BEGIN
  IF NEW.payment_id IS NULL OR NEW.payment_id = '' THEN
    SET NEW.payment_id = (
      SELECT CONCAT('PY', LPAD(
        IFNULL(
          MAX(CAST(SUBSTRING(payment_id, 3) AS UNSIGNED)), 0
        ) + 1, 5, '0'))
      FROM payments
    );
  END IF;
END | BEFORE | 2025-06-23 10:12:34.04 | ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION | root@localhost | cp850                | cp850_general_ci     | utf8mb4_0900_ai_ci |
| before_receipt_insert | INSERT | receipts | BEGIN
  IF NEW.receipt_id IS NULL OR NEW.receipt_id = '' THEN
    SET NEW.receipt_id = (
      SELECT CONCAT('RV', LPAD(
        IFNULL(
          MAX(CAST(SUBSTRING(receipt_id, 3) AS UNSIGNED)), 0
        ) + 1, 5, '0'))
      FROM receipts
    );
  END IF;
END | BEFORE | 2025-06-23 10:12:53.64 | ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION | root@localhost | cp850                | cp850_general_ci     | utf8mb4_0900_ai_ci |
+-----------------------+--------+----------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+------------------------+-----------------------------------------------------------------------------------------------------------------------+----------------+----------------------+----------------------+--------------------+
2 rows in set (0.00 sec)
